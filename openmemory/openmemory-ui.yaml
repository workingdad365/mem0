type: Microsoft.App/containerApps
name: openmemory-ui
properties:
  environmentId: /subscriptions/dd0af5f8-3ec0-430f-bb4f-3c70732c41cc/resourceGroups/rg-az01-co001501-sbox-openmemory/providers/Microsoft.App/managedEnvironments/cae-openmemory-sbox-poc-11
  configuration:
    secrets:
      - name: acr-password
      - name: ui-user-id
    ingress:
      external: true
      allowInsecure: false
      targetPort: 3000
      transport: http
    registries:
      - server: acropenmemory.azurecr.io
        username: acropenmemory
        passwordSecretRef: acr-password
    activeRevisionsMode: single
  template:
    containers:
    - name: openmemory-ui-app
      image: acropenmemory.azurecr.io/openmemory-ui:061201
      env:
      - name: NEXT_PUBLIC_API_URL
        value: "https://openmemory-mcp.orangeplant-ce4cc2a8.koreacentral.azurecontainerapps.io"
      - name: NEXT_PUBLIC_USER_ID
        secretRef: ui-user-id
      resources:
        cpu: 0.25
        memory: 0.5Gi
    scale:
      minReplicas: 1
      maxReplicas: 1